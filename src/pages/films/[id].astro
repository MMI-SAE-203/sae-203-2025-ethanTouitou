---
import { getFilmById } from "../../../backend/backend.mjs"; // Assure-toi que cette fonction existe
import Layout from "../../layouts/Layout.astro"; // Importe le layout

const { id } = Astro.params; // Récupère l'ID du film dans l'URL
const film = await getFilmById(id); // Récupère à nouveau les films ici
console.log(film);
---

<Layout>
    <section class="py-16">
        <div class="container mx-auto px-6">
            <div class="bg-white shadow-lg rounded-lg overflow-hidden">
                <img
                    src={film.imageUrl}
                    alt={film.titreFilm}
                    class="w-full h-64 object-cover"
                />

                <div class="p-6">
                    <h3 class="text-3xl font-bold text-blue-900 mb-4">
                        {film.titreFilm}
                    </h3>
                    <p class="text-gray-700 mb-6">
                        {film.synopsis}
                    </p>
                    <div class="mt-4 text-gray-500">
                        <p><strong>Durée:</strong> {film.duree} minutes</p>
                        <p>
                            <strong>Année de sortie:</strong>
                            {film.annee_sortie}
                        </p>
                        <p><strong>Réalisateur:</strong> {film.production}</p>
                    </div>
                </div>
                <div class="flex justify-center">
                    <iframe
                        width="560"
                        height="315"
                        src={film.bandeannonce}
                        title="YouTube video player"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        referrerpolicy="strict-origin-when-cross-origin"
                        allowfullscreen
                        class="m-12"></iframe>
                </div>
            </div>
        </div>
    </section>
</Layout>
